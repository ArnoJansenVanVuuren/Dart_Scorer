<ion-content>
  <form [formGroup]="playerGameForm">
    <ion-card style="margin-bottom: 20px">
      <!-- Game type selection -->
      <ion-item>
        <ion-select
          label="Choose A Game"
          labelPlacement="floating"
          interface="popover"
          formControlName="gameType"
        >
          <ion-select-option *ngFor="let game of games">{{
            game.name
          }}</ion-select-option>
        </ion-select>
      </ion-item>
      <!-- Game Variant -->
      <ion-item *ngIf="playerGameForm.value.gameType === 'KILLER'">
        <ion-select
          label="Game Variant"
          labelPlacement="floating"
          interface="popover"
          formControlName="gameVariant"
        >
          <ion-select-option value="301">301</ion-select-option>
          <ion-select-option value="501">501</ion-select-option>
          <ion-select-option value="701">701</ion-select-option>
        </ion-select>
      </ion-item>
    </ion-card>
    <ion-card id="player-card">
      <!-- Add players -->
      <ion-chip id="player-count-button" size="small" (click)="addPlayer()"
        >+</ion-chip
      >
      <!-- Player QTY selection -->
      <ion-grid
        class="ion-no-padding ion-no-margin"
        *ngIf="playerGameForm.value.gameVariant"
      >
        <ion-row class="ion-align-items-center ion-justify-content-center">
          <ion-col size="auto" class="ion-padding-end">
            <ion-item>
              <ion-label>Players</ion-label>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row formArrayName="playerNames">
          <ion-col
            size="12"
            sizeMd="6"
            *ngFor="
              let player of playerGameForm.controls.playerNames.controls;
              index as i
            "
          >
            <!-- Players -->
            <ion-item>
              <ion-input
                label="Player {{ i + 1 }} Name"
                labelPlacement="floating"
                [formControlName]="i"
              ></ion-input>
            </ion-item>
            <!-- ---<> check -->
            <!-- Errors -->
            <!-- <div
              *ngIf="
                getPlayerNameControl(player.formName).errors &&
                getPlayerNameControl(player.formName).dirty
              "
            >
              <div
                *ngFor="
                  let error of getPlayerNameControl(player.formName).errors
                    | keyvalue
                "
              >
                <ion-label *ngIf="error.key === 'minlength'" color="danger">
                  Length still needed:
                  {{ error.value.requiredLength - error.value.actualLength }}
                </ion-label>
              </div>
            </div> -->
          </ion-col>
        </ion-row>
      </ion-grid>
      <ion-button (click)="startGame()" [disabled]="!playerGameForm.valid">
        Start
      </ion-button>
    </ion-card>
  </form>
</ion-content>
